'use client'
import { useLessonRead } from "@/shared/api/generated";
import { getLocalized } from "@/shared/lib/utils";
import { ShowFetchContent } from "@/shared/ui/show-fetch-content";
import { Loader2 } from "lucide-react";
import { useLocale } from "next-intl";
interface LearnViewProps {
    lessonId: number
}
export const LearnView = ({ lessonId }: LearnViewProps) => {
    const { data, isLoading, error } = useLessonRead(lessonId)
    const locale = useLocale()
    return <ShowFetchContent
        data={data}
        isLoading={isLoading}
        isError={error}
        loader={<section className="w-full h-52 flex-center"> <Loader2 size={48} className="animate-spin text-primary " /></section>}
        error={<div>erorr</div>}
        content={<section className="stack items-center gap-10">
            <div dangerouslySetInnerHTML={{ __html: data && getLocalized(data, 'content', locale) }} />
            {data &&
                <video className="max-h-xl" width="640" height="360" controls >
                    <source src={getLocalized(data, 'media', locale)} type="video/mp4" />
                    Your browser does not support the video tag.
                </video>}
        </section>}
    />
};
